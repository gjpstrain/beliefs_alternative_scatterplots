---
format: acm-pdf
keep-tex: true
params:
  
  eval_models: false
knitr:
  opts_chunk: 
    
    cache_comments: false
    crop: true
execute: 
  echo: false
  warning: false
  message: false
  include: false
bibliography: beliefs-atypical.bib
title: Changing Beliefs About Correlations in Atypical Scatterplots
short-title: 
author:
  - name: Gabriel Strain
    email: gabriel.strain@manchester.ac.uk
    orcid: 0000-0002-4769-9221
    affiliation:
      name: Department of Computer Science, Faculty of Science and Engineering, University of Manchester
      address: Oxford Road
      city: Manchester
      country: United Kingdom
      postal-code: M13 9PL
  - name: Andrew J. Stewart
    email: andrew.j.stewart@manchester.ac.uk
    affiliation:
      name: Department of Computer Science, Faculty of Science and Engineering, University of Manchester
      address: Oxford Road
      city: Manchester
      country: United Kingdom
      postal-code: M13 9PL
  - name: Paul Warren
    email: paul.warren@manchester.ac.uk
    affiliation:
      name: Division of Psychology, Communication and Human Neuroscience, School of Health Sciences, Faculty of Biology, Medicine, and Health, University of Manchester
      address: Oxford Road
      city: Manchester
      country: United Kingdom
      postal-code: M13 9PL
  - name: Charlotte Rutherford
    email: charlotte.rutherford-2@postgrad.manchester.ac.uk
    affiliation:
      name: Division of Psychology Communication and Human Neuroscience, School of Health Sciences, Faculty of Biology, Medicine, and Health, University of Manchester
      address: Oxford Road
      city: Manchester
      country: United Kingdom
      postal-code: M13 9PL
  - name: Caroline Jay
    affiliation:
      name: Department of Computer Science, Faculty of Science and Engineering, University of Manchester
      address: Oxford Road
      city: Manchester
      country: United Kingdom
      postal-code: M13 9PL
acm-metadata:
  # comment this out to make submission anonymous
  
  # anonymous: true
  # comment this out to build a draft version
  final: false
  # comment this out to specify detailed document options
  # acmart-options: sigconf, review  
  # acm preamble information
  copyright-year: 2018
  acm-year: 2018
  copyright: acmcopyright
  doi: XXXXXXX.XXXXXXX
  conference-acronym: "Conference acronym 'XX"
  conference-name: |
    Make sure to enter the correct
    conference title from your rights confirmation emai
  conference-date: June 03--05, 2018
  conference-location: Woodstock, NY
  price: "15.00"
  isbn: 978-1-4503-XXXX-X/18/06
  # if present, replaces the list of authors in the page header.
    </ccs2012>
    \end{CCSXML}
    
    \ccsdesc[500]{Computer systems organization~Embedded systems}
    \ccsdesc[300]{Computer systems organization~Redundancy}
    \ccsdesc{Computer systems organization~Robotics}
    \ccsdesc[100]{Networks~Network reliability}
  shortauthors: Strain et al.
  # Please copy and paste the code instead of the example below.
     </concept>
     <concept>
     </concept>
     <concept>
     </concept>
     <concept>
     </concept>
  # The code below is generated by the tool at http://dl.acm.org/ccs.cfm.
  ccs: |
    \begin{CCSXML}
    <ccs2012>
     <concept>
      <concept_id>10010520.10010553.10010562</concept_id>
      <concept_desc>Computer systems organization~Embedded systems</concept_desc>
      <concept_significance>500</concept_significance>
      <concept_id>10010520.10010575.10010755</concept_id>
      <concept_desc>Computer systems organization~Redundancy</concept_desc>
      <concept_significance>300</concept_significance>
      <concept_id>10010520.10010553.10010554</concept_id>
      <concept_desc>Computer systems organization~Robotics</concept_desc>
      <concept_significance>100</concept_significance>
      <concept_id>10003033.10003083.10003095</concept_id>
      <concept_desc>Networks~Network reliability</concept_desc>
      <concept_significance>100</concept_significance>
  keywords:
    - belief change
    - correlation perception
    - scatterplot
    - crowdsourced
abstract: |
  abstract goes here
editor: 
  markdown: 
    wrap: 72
---

```{r}
#| label: setup

set.seed(1234) # random seed for number generation

library(tidyverse)
library(MASS)
library(emmeans)
library(scales)
library(buildmer)
library(lme4)
library(kableExtra)
library(papaja)
library(qwraps2)
library(lmerTest)
library(ggdist)
library(ggpubr)
library(conflicted)
library(ggtext)
library(r2glmm)
library(grid)
library(DescTools)
library(Matrix)
library(irr)

# fix conflicts now using the conflicted package

conflicts_prefer(dplyr::select(), dplyr::filter(), lme4::lmer(), DescTools::AUC())

```

```{r}
#| label: lazyload-cache

if (!params$eval_models){ lazyload_cache_dir("beliefs_attitudes_atypical_scatterplots_cache/pdf") }
```

```{r}
#| label: load-data

# load in data csvs for pre-test and main experiment

pre_test_anon <- read_csv("data/pre_test_response_final.csv")
```

```{r}
#| label: wrangle-data

## NB: With the exception of anonymization, data are provided as-is from 
## pavlovia (survey tool). Wrangling function *must* be run first to make
## the data set usable

wrangle_pre_test <- function(anon_file) {
  
# extract demographic information
  
demographics <- anon_file %>%
  filter(!is.na(gender_slider.response)) %>%
  select(matches(c("participant",
                   "age_textbox.text",
                   "gender_slider.response")))

# select relevant columns
# select only experimental items
# change data types where appropriate
# output this file with suffix 'tidy'

anon_file %>%
  select(c("participant",
           "avg_corr",
           "avg_emot",
           "slider_emotion.response",
           "slider_belief.response",
           "statement",
           "item_no",
           "label",
           "session"
           )) %>%
  filter(item_no < 26) %>%
  full_join(demographics, by = "participant") %>%
  select(-c("__participant")) %>%
  assign(paste0(unique(anon_file$expName), "_tidy"),
           value = ., envir = .GlobalEnv)
}

# use wrangling function on anonymised data file

wrangle_pre_test(pre_test_anon)

# check for missing age and gender id values

sum(is.na(beliefs_scatterplots_pretest_tidy$gender_slider.response))

sum(is.na(beliefs_scatterplots_pretest_tidy$age_textbox.text))

# missing age and gender values for a single participant
# print session with missing values

beliefs_scatterplots_pretest_tidy %>%
  filter(is.na(age_textbox.text)) %>%
  distinct(session)

# session id was used to look up age and gender identity and manually add
# this information to the final results csv using the prolific-supplied
# demographic information for the pretest
# this is not included as would expose personally identifiable prolific IDs

# Extract gender data into separate df

gender <- distinct(beliefs_scatterplots_pretest_tidy, participant,
                      .keep_all = TRUE) %>%
  group_by(gender_slider.response) %>%
  summarise(perc = n()/nrow(.)*100) %>%
  pivot_wider(names_from = gender_slider.response, values_from = perc)

```

```{r}
#| label: author-pre-test-ratings

# NB: this code is reproduced here so that test values are accessible
# It can also be found at item_preparation/pre_test_stim.R

# Create dataframes for each rater

author_A_statements <- read_csv("item_preparation/statements_A.csv") %>%
  rename(Topic_Emotionality_A = Topic_Emotionality,
         Strength_of_Correlation_A = Strength_of_Correlation) %>%
  select(-Notes)
  

author_B_statements <- read_csv("item_preparation/statements_B.csv") %>%
  rename(Topic_Emotionality_B = Topic_Emotionality,
         Strength_of_Correlation_B = Strength_of_Correlation) %>%
  select(-Notes)

# Bind dataframes together

all_ratings <- left_join(author_A_statements,
                         author_B_statements,
                         by = c("Number",
                                "Statements"))

## IRR Calculations

irr_emot <- kappa2(matrix(c(all_ratings$Topic_Emotionality_A,
                all_ratings$Topic_Emotionality_B), ncol = 2), "squared")    

irr_corr <- kappa2(matrix(c(all_ratings$Strength_of_Correlation_A,
                all_ratings$Strength_of_Correlation_B), ncol = 2), "squared")    

```

# Introduction

# Related Work

# Pre-Study: Investigating Beliefs About Relatedness Statements

## Introduction

### Testing Beliefs

### Preparation of Stimuli

Due to previous evidence suggesting effects of prior belief strength and topic
emotionality on the propensity for belief change, we first aim to build a
picture of people's thoughts and feelings along these dimensions in our
population of interest. With the intention of testing the potential for
changes in beliefs about correlations displayed in scatterplots depicting
weak and strong correlations, and those whose topics were both strong and
neutral in emotional valence, we began by using ChatGPT4 [@chatgpt] to
generate 100 correlation statements using the following prompt:

```{=tex}
\begin{center}

    ``Generate 100 statements that describe the correlation between two variables, such as :

     "X is associated with a higher level of Y" or

     "As X increases, Y increases".

    Try to match all the statements on emotionality.``
    
\end{center}
```

The full list of these statements can be found in the supplementary materials.
Note that we cite our use of ChatGPT according to the AI Code of Conduct developed
by Iliada Eleftheriou and Ajmal Mubarik and the University of Manchester
[@iliada_2023]. Two authors rated each statement on topic emotionality and
strength of correlation using Likert scales from 1 to 7. Topic emotionality
had a midpoint at 4, whereas strength of correlation varied between 1 (Not Related At All)
and 7 (Strongly Related). We calculated a quadratic weighted Cohen's Kappa
between the two raters, in order to penalise larger magnitude disagreements
more harshly. We found agreement above chance for both topic emotionality
($\kappa$ = `r printnum(irr_emot$value, digits = 2)`, *p* `r printp(irr_emot$p.value, add_equals = TRUE)`)
and strength of correlation ($\kappa$ = `r printnum(irr_corr$value, digits = 2)`, *p* `r printp(irr_corr$p.value, add_equals = TRUE)`), indicating moderate levels of agreement in both cases [@cohen_1968; @fleiss_1969].

```{r}
#| label: tbl-pre-test-hi
#| include: true
#| tbl-cap: Pre-test statements that were rated as being strongly correlated.

# read in pre-test csv data

pre_test_statements_hi <- read_csv("data/pre_test_data.csv") %>%
  filter(label == "high_corr") %>%
  select(c("statement")) %>%
  rename("Statement - Strong Correlation Depicted" = "statement")

# make table

kbl(pre_test_statements_hi, booktabs = T)
```

```{r}
#| label: tbl-pre-test-low
#| include: true
#| tbl-cap: Pre-test statements that were rated as being weakly correlated.

# read in pre-test csv data

pre_test_statements_lo <- read_csv("data/pre_test_data.csv") %>%
  filter(label == "low_corr") %>%
  select(c("statement")) %>% 
  rename("Statement - Weak Correlation Depicted" = "statement")

# make table

kbl(pre_test_statements_lo, booktabs = T)
```

Following this, we selected strongly and weakly correlated statements with the
highest level of absolute agreement, resulting in the 14 strongly correlated
statements that can be seen in @tbl-pre-test-hi and the 11 weakly correlated
statements that can be seen in @tbl-pre-test-low. As we only needed two statements
for each of the high and low correlation conditions in our main experiment, 
we elected to test these 25 statements with a representative UK sample in order
to ascertain consensus on both topic emotionality and strength of correlation.
Doing so allows us to effectively exclude these factors when we analyse the effects
of our atypical scatterplot designs on the propensity for belief change
in our main experiment

## Method

### Participants

100 participants were recruited using the Prolific.co platform. English fluency and
residency was required for participation, as our main experiment relied on familiarity
with data visualisations from a popular British news source. In addition to 25
experimental items, we included 6 attention check items, which asked participants
to provide specific answers. No participants failed more than 2 out of 6 attention
check items, and therefore none were excluded from the study. 

### Design

### Procedure

## Results

## Discussion

# Main Study: Potential for Belief Change Using Atypical Scatterplots

## Introduction

## Method

### Participants

### Design

### Procedure

## Results

## Discussion

# General Discussion

# Limitations

# Future Work

# Conclusion

# References {.unnumbered}
